
<!-- navigation header -->
<head>
<meta name="robots" content="noindex">

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="stylesheet" type="text/css" href="/css/style.css">


<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<script src="/js/amazon-cognito-identity.min.js"></script>
<script>



var testerCognitoData = { UserPoolId : 'us-west-2_aVUOahU4B',ClientId : 'j2cf2bco2ubve1dhse16krbes'};
var testerUserPool = new AmazonCognitoIdentity.CognitoUserPool(testerCognitoData);

var organizationCognitoData = { UserPoolId : 'us-west-2_UyEclqpFg',ClientId : '5v4v8ain364fgum9e8a4r7kj2f'};
var organizationUserPool = new AmazonCognitoIdentity.CognitoUserPool(organizationCognitoData);

function resetPassword(username,confirmationCode,newPassword, onSuccess, onFailure){
	CU = new AmazonCognitoIdentity.CognitoUser({
			Username: username,
			Pool: getCurrentUserPool()
		});
	CU.confirmPassword(
		confirmationCode,
		newPassword,
		{
			onSuccess: onSuccess,
			onFailure: onFailure
		}
	);
}

function forgotPassword(username , onSuccess, onFailure){
	CU = new AmazonCognitoIdentity.CognitoUser({
			Username: username,
			Pool: getCurrentUserPool()
		});
	CU.forgotPassword({
		onSuccess: onSuccess,
		onFailure: onFailure
		});
}

function getCurrentUserPool(){
	ut = getCurrentUserType();
	if (ut=='tester'){
		return testerUserPool;
	} else if (ut =='organization'){
		return organizationUserPool;
	}
}

function setCurrentUserType(ut){
	localStorage.setItem('currentUserType',ut)
}

function getCurrentUserType(){
	ut = localStorage.getItem('currentUserType');
	// assume tester if null
	if (ut == null){
		ut = 'tester';
		setCurrentUserType(ut);
	}
	return ut
}

function getCurrentSession(){
	var cognitoUser = getCurrentUserPool().getCurrentUser();
	var currentSession = null;
	if (cognitoUser != null) {
		cognitoUser.getSession(function(err, session) {
			if (err) {
				console.log(err);
				return;
			}
			if (session.isValid()){
				currentSession = session.idToken.jwtToken;
			} 
		});
	}
	return currentSession;
}

function forceTokenRefresh(onSuccess){
	getCurrentUserPool().getCurrentUser().refreshSession(getCurrentAuthedUserObject().Session.getRefreshToken(),onSuccess);
}

function refreshTokenIfNeeded(){
	var cognitoUser = getCurrentUserPool().getCurrentUser();
	var currentSession = null;
	if (cognitoUser != null) {
		cognitoUser.getSession(function(err, session) {
			if (!session.isValid()){
				forceTokenRefresh(function(){});
			} 
		});
	}
}

setInterval(refreshTokenIfNeeded, 300000);

function getCurrentUserData(){
	var cognitoUser = getCurrentUserPool().getCurrentUser();
	var userdata = null;
	if (cognitoUser != null) {
		cognitoUser.getSession(function(err, session) {
			if (err) {
				console.log(err);
				return;
			}
			if (session.isValid()){
				userdata =  session.idToken.payload;
			}
		});
	}
	return userdata;
}

// uses LocalStorage to get the current user
// for some weird reason, this object doesnt have the session attached
// but getSession() works fine so this function just re-assigns "Session"
function getCurrentAuthedUserObject(){
	var cognitoUser = getCurrentUserPool().getCurrentUser();
	if (cognitoUser != null) {
		cognitoUser.getSession(function(err, session) {
			if (err) {
				console.log(err);
				return;
			}
			if (session.isValid()){
				cognitoUser.Session =  session;
			}
		});
	}
	return cognitoUser;
}

function verifyNotSignedIn(){
	if (getCurrentUserData() != null){
		location.replace('/account');
	} 
}

function verifySignedIn(callback){
	if (getCurrentUserData() == null){
		location.replace('/signin');
	} else {
		document.getElementById('auth-body').style.visibility = 'visible';
		callback();
	}
}

function verifySignedInAsTester(callback){
	if (getCurrentUserData() == null || getCurrentUserType() != 'tester'){
		location.replace('/signin');
	} else {
		document.getElementById('auth-body').style.visibility = 'visible';
		callback();
	}
}

function verifySignedInAsOrganization(callback){
	if (getCurrentUserData() == null || getCurrentUserType() != 'organization'){
		location.replace('/signin#org');
	} else {
		document.getElementById('auth-body').style.visibility = 'visible';
		callback();
	}
}



</script>
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#3b3a3a">
<meta name="msapplication-TileColor" content="#f2f2f2">
<meta name="theme-color" content="#ffffff">
</head>

<style>

.header:after{
	content: "beta";
	position: fixed;
	width: 80px;
	height: 25px;
	background: #EE8E4A;
	top: 7px;
	left: -20px;
	text-align: center;
	font-size: 13px;
	font-family: sans-serif;
	text-transform: uppercase;
	font-weight: bold;
	color: #fff;
	line-height: 27px;
	transform:rotate(-45deg);
}
	

	.logo-text{
		font-size:25px;
		font-family : Avenir;
		color: var(--off-white-color);
		text-decoration: none;

	}
	.logo-text:hover{
		opacity: .8;
		cursor: pointer;
	}
	
	.nav-text{
		text-decoration: none;

		font-size:20px;
		font-family : Avenir;
		color: var(--off-white-color);
		float: right;
		margin-right: 20px;
		margin-top: 4px;

	}
	
	.text-underline:after
	{
		position: absolute;
		opacity: 0;
		width: 0%;
		height: 2px;
		content: '';
		background: var(--off-white-color);
		transition: all 0.3s;
		left: 0px;
		bottom: 0px;
		opacity: .8;

	}


	.text-underline:hover:before, .text-underline:hover:after
	{
		opacity: 1;
		width: 100%;
	}

	.text-underline
	{
		padding-bottom: 5px;
		position: relative;
		z-index: 0;
		cursor: pointer;
	}
	
	.nav-text:hover{
		opacity: .8;
		cursor: pointer;
	}
	
	.far-right{
		margin-right: 40px;

	}

	.header {
		padding: 10px 16px;
		margin-left: -24px;
		//background: var(--off-black-color);
		background: rgba(59, 58, 58, .85);
		color: var(--off-white-color);
		//opacity: .75;
		z-index:1000;
		height: 35px;
		-webkit-backdrop-filter: blur(5px);
		backdrop-filter: blur(5px); 
		//animation: fadein 1s;


	}
	
	.transition{
		transition: all .25s ease-in-out;
		-moz-transition: all .25s ease-in-out;
		-webkit-transition: all .25s 
		
	}
	
	.invisible-header{
		background: rgba(59, 58, 58, .00) !important;
		-webkit-backdrop-filter: none !important;
		backdrop-filter: none !important; 
	}
	
	@keyframes fadein {
		0% {
			opacity: 0;
		}
		100% {
			opacity: 1;
		}
	}

	.content {
		padding: 16px;
	}

	.sticky {
		position: fixed;
		top: 0;
		width: 100%;
	}

	.content {
		padding-top: 66px;
	}
	
/*	dropdown*/





.dropdown-content a {
	color: black;//var(--off-black-color);
	padding: 12px 16px;
	text-decoration: none;
	display: block;	
	text-decoration: none;


}

.dropdown-content {
	
	visibility: hidden;
	

	margin-right: 200px;

		float: right;

		background-color: #f9f9f9;
		min-width: 160px;
		z-index: 1;
	
	font-size:18px;
	font-family : Avenir;
	//color: var(--off-white-color);
	margin-right: 20px;
	margin-top: 4px;
	border-left: solid  var(--off-black-color) 1px;
	border-right: solid  var(--off-black-color) 1px;
	border-bottom: solid  var(--off-black-color) 1px;
	margin-top:8px;
	background-color: rgba(255, 255, 255, 0.9);

   -webkit-backdrop-filter: blur(5px);
	backdrop-filter: blur(5px);  
}

.dropdown-content a:hover {
	background: rgba(59, 58, 58, .85);
	color:var(--off-white-color);
}




</style>

<script>
function addUnderline(tab){
	style_id = tab + '-underline';
	newCSS = `#${tab}:after {
		position: absolute;
		opacity: 1;
		width: 100%;
		height: 2px;
		content: '';
		background: var(--off-white-color);
		transition: all 0.3s;
		left: 0px;
		bottom: 0px;
		opacity: .8;
	}`
	style = document.createElement('style');
	style.setAttribute('id', style_id);
	style.innerText = newCSS;
	document.head.appendChild(style);
	showDropdown(tab);
}
function removeUnderline(tab){
	style_id = tab + '-underline';
	document.getElementById(style_id).remove();
	hideDropdown(tab);
}
var shouldHideDropdown = {};
function showDropdown(tab){

	content_name = tab + '-content';
	
	document.getElementById(content_name).style.visibility ='visible';
	document.getElementById(content_name).parentNode.parentNode.parentNode.parentNode.style.pointerEvents = 'auto';


	shouldHideDropdown[tab] = false;
}
function hideDropdown(tab){
	content_name = tab + '-content';
	shouldHideDropdown[tab] = true;
	
	setTimeout(function(content_name){

		if (shouldHideDropdown[tab]) {
			document.getElementById(content_name).style.visibility ='hidden';
			document.getElementById(content_name).parentNode.parentNode.parentNode.parentNode.style.pointerEvents = 'none';

		}
		}, 150,content_name);
	
}

// change profile icon depending on user type
if (getCurrentUserType() == 'tester' && getCurrentSession() != null){
	document.getElementById('profile-logo-img').src = '/icons/profile-4.svg';
} else if (getCurrentUserType() == 'organization' && getCurrentSession() != null){
	document.getElementById('profile-logo-img').src = '/icons/team.svg';
}
</script>

<div class="header sticky transition" id="myHeader">
	<a href="/" class="logo-text">&nbsp;&nbsp;&nbsp;&nbsp;BugPoC</a>
	
	<a id="profile-header" href="/account"  style="position: relative;z-index: 0;cursor: pointer;" class="nav-text far-right text-underlinex"><img id="profile-logo-img" src="/icons/profile.svg" style="width:30px;margin-top:-2px">
<!-- 	change to src="/icons/profile-4.svg" if a bounty hunter signs in -->
	</a>
	
	 <table class="dropdown" style="float:right; margin-right:-33px; margin-top:-3px; pointer-events: none;">
		<tr>
			<td style=" padding-left:10px; pointer-events: initial;">
				<a id="org-header" class="dropbtn nav-text text-underline" style="float:left;" onmouseover="showDropdown('org-header')" onmouseout="hideDropdown('org-header')" href="/organizations">Organizations</a>
			</td>
		</tr>
		<tr>
			<td>
				<div id="org-header-content" class="dropdown-content" onmouseover="addUnderline('org-header')" onmouseout="removeUnderline('org-header')" style="">
					<a href="/organizations/view">View a PoC</a>
				</div>
			</td>
		</tr>
	</table> 
	
<!-- 	<a id="org-header-x" href="/organizations"  class="nav-text text-underline">Organizations</a> -->
<!-- 	<a id="tester-header" href="/testers.html"  class="nav-text text-underline">Testers</a> -->
	 <table class="dropdown" style="float:right; margin-right:-105px; margin-top:-3px; pointer-events: none;">
		<tr>
			<td style=" padding-left:10px; pointer-events: initial;">
				<a id="tester-header" class="dropbtn nav-text text-underline" style="float:left;" onmouseover="showDropdown('tester-header')" onmouseout="hideDropdown('tester-header')" href="/testers">Testers</a>
			</td>
		</tr>
		<tr>
			<td>
				<div id="tester-header-content" class="dropdown-content" onmouseover="addUnderline('tester-header')" onmouseout="removeUnderline('tester-header')" style="">
					<a href="/testers/front-end">Front-End PoC</a>
					<a href="/testers/http">HTTP PoC</a>
					<a href="/testers/python">Python PoC</a>
					<a href="/testers/other">Other</a>
				</div>
			</td>
		</tr>
	</table> 
	

	
	

</div>



<!-- stash the Loading Screen here...  -->

<div class="animated" id="loading-div" style="display:none;z-index:5000;background-color: rgba(256, 256, 256, 0.6);-webkit-backdrop-filter: blur(3px);backdrop-filter: blur(3px);  position: fixed; top: 0; left: 0;width: 100%; height: 100%; animation-fill-mode: forwards; ">
	<img class="animated" id="loading-img" src="/images/gears.svg" style="position: absolute;top: 42%;left: 50%; width:30%;margin-top:-15%;margin-left: -15%; animation-fill-mode: forwards; ">
	<div class="animated"  id="loading-txt" style="color:var(--off-black-color);font-size:6vw;position: absolute; left: 36%;top: 62%;font-weight: bold; animation-fill-mode: forwards; ">Loading...</div>
</div>

<script>

function showLoadingScreen(){
	document.getElementById('loading-div').classList.add("fadeIn");
	document.getElementById('loading-div').style.display='inline-block';
	document.getElementById('loading-img').classList.add("bounceIn");
	document.getElementById('loading-txt').classList.add("bounceIn");
	
	document.getElementById('loading-div').classList.remove("fadeOut");
	document.getElementById('loading-img').classList.remove("bounceOut");
	document.getElementById('loading-txt').classList.remove("bounceOut");
}

function hideLoadingScreen(){
	document.getElementById('loading-div').classList.remove("fadeIn");
	document.getElementById('loading-img').classList.remove("bounceIn");
	document.getElementById('loading-txt').classList.remove("bounceIn");
	
	document.getElementById('loading-div').classList.add("fadeOut");
	document.getElementById('loading-img').classList.add("bounceOut");
	document.getElementById('loading-txt').classList.add("bounceOut");
	
	setTimeout(function(){document.getElementById('loading-div').style.display='none';}, 1000)
}
</script>
